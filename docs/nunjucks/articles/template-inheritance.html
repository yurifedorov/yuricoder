

 


 
 
 
 
 

 
 
 
 



 



 
 
 
 


 
 
 








































<html lang="en" data-observe-resizes>

  <head>
    <title>Наследование шаблонов в Nunjucks</title>
    <meta name="description" content="Самая сильная сторона Nunjucks - это возможность создавать шаблоны для каждого отдельно взятого компонента веб-сайта" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="/img/favicon.jpg" rel="icon" type="image/svg+xml">
    <link rel="stylesheet" href="/style.min.css">
    
    
    <base href="/docs/nunjucks/">

    
    
      <link rel="stylesheet" href="/libs/prism/prism-min.css">
      <script src="/libs/prism/prism-min.js" async></script>
    

  </head>

  <body data-observe-resizes>
    <header>
      <a href="/index.html" class="logo"></a>
      <input type="checkbox" id="nav-toggle" hidden>
<label for="nav-toggle" class="nav__toggle" onclick></label>
<nav class="nav nav_main">
  <ul>
    <li><a href="/about.html">About me</a>
    <li><a href="/portfolio/">Works</a>
    <li><a href="/docs/">Docs</a>
  </ul>
</nav>
    </header>
    
    <aside class="aside aside_top">
  

<ul class="breadcrumbs">
      <li> <a href="/">home</a>
   <li> <a href="../">docs</a>                               
   <li> <a href="../nunjucks">nunjucks</a>           
   <li> <a href="../nunjucks/articles">articles</a> 
  
      <li> <span>template-inheritance</span>

</ul>
</aside>
    <aside class="aside aside_left">

       
         
        
   
  
</aside>
      
      

    <main data-observe-resizes>
      

  <h1>Наследование шаблонов в nunjucks</h1>
  <p>Самая сильная сторона Nunjucks - это возможность создавать шаблоны для каждого отдельно взятого компонента веб-сайта</p>
  <p>Практически любой многостраничный сайт имеет одинаковые части, например: <b>&lt;header&gt;</b>, <b> &lt;footer&gt;</b> и возможно <b>&lt;aside&gt;</b>.</p>
  <p>Без шаблонизаторов изменять 'шапку' или 'футер' ужасно долгое занятие. Для этого придется открыть каждый html документ, найти в нем нужный кусок кода и вставить туда новую инфомацию. Хорошо, если это лендинг или 2-3 страничный сайт - тогда шаблонизатор особо и не нужен.</p>
  <p>Для установки общих для всего сайта блоков можно использовать шаблонизатор <a href="https://mozilla.github.io/nunjucks/">Nunjucks</a>.</p>

  <h2>Базовый шаблон</h2>
  <p>Имеет общий &lt;header&gt;, &lt;footer&gt; и некоторые данные для поисковых систем:</p>

    
    
    
    
    
    
    
    
    


<div class="code-example">

  
  
  
  

  

  
  
  

  
  
  
    
    
    
    <style>[id='base_code-njk-checkbox']:checked ~ #base_code-njk-code {z-index: 2;}</style>
    
    
    

    <div id="base_code-njk-code" class="code">
      
      
        
        <pre class="line-numbers">
          <code class="language-jinja2">

&lt;html lang="en">
  &lt;head>
    &lt;meta charset="UTF-8">
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0">
    &lt;meta http-equiv="X-UA-Compatible" content="ie=edge">
    &lt;link href="/img/favicon.jpg" rel="icon" type="image/svg+xml">
    &lt;link rel="stylesheet" href="/style.min.css">
    {% block head %} {# ресурсы, указываемые в дочерних шаблонах #} {% endblock %}
  &lt;/head>
  &lt;body>
    &lt;header> {# общий header #} &lt;/header>
    {% block aside_top %} {# include aside_top #} {% endblock %}
    {% block aside_left %} {# include aside_left #} {% endblock %}
    {% block aside_right %} {# include aside_right #} {% endblock %}
    &lt;main>{% block main %} {# контент #} {% endblock %}&lt;/main>
    &lt;footer> {# общий footer #} &lt;/footer>
  &lt;/body>
&lt;/html>

</code>
        </pre>
        
      
    </div>
  

  
  
  

  
  
  

  
  

</div>

  <p>В шаблоне <b>base.njk</b> стандартная HTML-разметка веб-страницы. В &lt;head&gt; подключены общие метаданные, favicon и css.</p>
  
  <h3>Дополнительный 'head'. Зачем он нужен? </h3>
  <p>Иногда надо подключить какой-нибудь скрипт или библиотеку на одну из страниц. Если подключать их в <b>base.njk</b>, то они будут на каждой странице сайта, где они не всегда нужны. Объявив <b>{ % block head % }</b>, все дополнительные ресурсы можно подключить в дочернем шаблоне и после сборки мы получим набор html-страниц содержащий только самое необходимое.</p>

  <h2>Дочерние шаблоны</h2>
  <p>Это любая страница сайта: каталог товаров, контактная информация, статья и т.д. </p>

  <h3>Дочерний шаблон №1 имеет:</h3>
  <ul>
    <li>ссылку на базовый шаблон (extends)</li>
    <li>свой индивидуальный блок head</li>
    <li>уникальный контект</li>
  </ul>

  
  
  
  
  
  
  
  
  


<div class="code-example">

  
  
  
  

  

  
  
  

  
  
  
    
    
    
    <style>[id='child-1_code-njk-checkbox']:checked ~ #child-1_code-njk-code {z-index: 2;}</style>
    
    
    
    <input type="radio" name="button" id="child-1_code-njk-checkbox">
    <label for="child-1_code-njk-checkbox" onclick>NJK</label>
    

    <div id="child-1_code-njk-code" class="code">
      
      
        
        <pre class="line-numbers">
          <code class="language-jinja2">
{% extends "parts/base.njk" %}

{% block head %}
  {# стили для текущей страницы #}
{% endblock %}

{% block main %}
  &lt;h1>Первая страница&lt;/h1>
  &lt;p>Я дочерний шаблон №1&lt;/p>
{% endblock %}
</code>
        </pre>
        
      
    </div>
  

  
  
  

  
  
  

  
  
    
    
    
    
    <style>[id='child-1_code-demo-checkbox']:checked ~ #child-1_code-demo {z-index: 2;}</style>
    <input type="radio" name="button" id="child-1_code-demo-checkbox">
    <label for="child-1_code-demo-checkbox" class="demo_button" onclick>DEMO</label>
    
    
      <div id="child-1_code-demo" class="demo">
        <html lang="en" data-observe-resizes>

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="/img/favicon.jpg" rel="icon" type="image/svg+xml">
    <link rel="stylesheet" href="/style.min.css">
    
  <style>
    .header-test {
      background: skyblue !important;
      height: 40px !important;
      display: block;
      box-sizing: border-box;
    }
    .main-test {
      background: yellow !important;
      min-height: 180px !important;
      padding: 20px;
    }
    .footer-test {
      background: skyblue !important;
      height: 40px !important;
      display: block;
    }
  </style>

  </head>

  <body>
    <header class='header-test'>header задан в base.njk</header>
      
      
      

    <main data-observe-resizes class='main-test'>
      
<h1>Каталог товаров</h1>
<p>дочерний шаблон №1</p>

    </main>

    <footer class='footer-test'>footer задан в base.njk</footer>
  </body>

</html>
      </div>
    
    
    
  

</div>

  <h3>Дочерний шаблон №2</h3>
  <p>Имеет то-же набор что и №1, но с другим контентом и возможно другим содержимым в head.</p>
  
  
  
  
  
  
  
  
  


<div class="code-example">

  
  
  
  

  

  
  
  

  
  
  
    
    
    
    <style>[id='child-2_code-njk-checkbox']:checked ~ #child-2_code-njk-code {z-index: 2;}</style>
    
    
    
    <input type="radio" name="button" id="child-2_code-njk-checkbox">
    <label for="child-2_code-njk-checkbox" onclick>NJK</label>
    

    <div id="child-2_code-njk-code" class="code">
      
      
        
        <pre class="line-numbers">
          <code class="language-jinja2">
{% extends "parts/base.njk" %}

{% block head %}
  {# стили для текущей страницы #}
{% endblock %}

{% block main %}
  &lt;h1>Вторая страница&lt;/h1>
  &lt;p>Я дочерний шаблон №2&lt;/p>
{% endblock %}
</code>
        </pre>
        
      
    </div>
  

  
  
  

  
  
  

  
  
    
    
    
    
    <style>[id='child-2_code-demo-checkbox']:checked ~ #child-2_code-demo {z-index: 2;}</style>
    <input type="radio" name="button" id="child-2_code-demo-checkbox">
    <label for="child-2_code-demo-checkbox" class="demo_button" onclick>DEMO</label>
    
    
      <div id="child-2_code-demo" class="demo">
        <html lang="en" data-observe-resizes>

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="/img/favicon.jpg" rel="icon" type="image/svg+xml">
    <link rel="stylesheet" href="/style.min.css">
    
  <style>
    .header-test {
      background: skyblue !important;
      height: 40px !important;
      display: block;
      box-sizing: border-box;
    }
    .main-test {
      background: yellow !important;
      min-height: 180px !important;
      padding: 20px;
    }
    .footer-test {
      background: skyblue !important;
      height: 40px !important;
      display: block;
    }
  </style>

  </head>

  <body>
    <header class='header-test'>header задан в base.njk</header>
      
      
      

    <main data-observe-resizes class='main-test'>
      
<h1>Контакты</h1>
<p>дочерний шаблон №2</p>

    </main>

    <footer class='footer-test'>footer задан в base.njk</footer>
  </body>

</html>
      </div>
    
    
    
  

</div>
  
  <p><b>Итог:</b> &lt;header&gt; и &lt;footer&gt; сгенерировался из base.njk, а контент из дочерних шаблонов.</p>
  <span class="warning">Сканируя файлы шаблонов, Nunjucks вначале находит родителя. Поэтому тег <b>extends</b> должен быть первым в шаблоне.</span>
  <p>Таким образом, если нужно внести изменения в &lt;header&gt; или &lt;footer&gt; то достаточно внести правки только в <b>base.njk</b>.</p>
  <p>Это хорошее решение, например если размещать сайт на <a href="https://pages.github.com/">GitHub Pages</a>, который не поддерживает PHP.</p>



    </main>

    <footer>
      <i>footer</i>
      <i>footer</i>
      <i>footer</i>
    </footer>

    
    <script>!function(){var e,t,s,r={SM:384,MD:576,LG:768,XL:960,XXL:1440};function a(){for(var e,t=new ResizeObserver(function(e){e.forEach(function(e){if(e.target.updateBreakpoints)e.target.updateBreakpoints(e.contentRect.width);else{var t=e.target.dataset.breakpoints?JSON.parse(e.target.dataset.breakpoints):r;0===e.width?e.target.dataset.observing=!1:e.target.dataset.observing=!0,Object.keys(t).forEach(function(s){var r=t[s];e.contentRect.width>=r?e.target.classList.add(s):e.target.classList.remove(s)})}})}),s=document.querySelectorAll("[data-observe-resizes]"),a=0;e=s[a];a++)t.observe(e);function i(){return"object"==typeof Reflect?Reflect.construct(HTMLElement,[],i):HTMLElement.call(this)||this}new MutationObserver(function(e){e.forEach(function(e){var s,r;s=e.addedNodes,r=t.observe.bind(t),s&&[].slice.call(s).forEach(function(e){if(1===e.nodeType){var t=[].slice.call(e.querySelectorAll("[data-observe-resizes]"));e.hasAttribute("data-observe-resizes")&&t.push(e);for(var s,a=0;s=t[a];a++)r(s)}})})}).observe(document.body,{childList:!0,subtree:!0}),i.prototype=Object.create(HTMLElement.prototype,{constructor:{value:i},connectedCallback:{value:function(){var e=this.getAttribute("breakpoints");this.breakpoints=e?JSON.parse(e):r,t.observe(this),this.setAttribute("observing","")}},updateBreakpoints:{value:function(e){for(var t in e>0?this.setAttribute("observing",""):this.removeAttribute("observing"),this.breakpoints){e>=this.breakpoints[t]?this.classList.add(t):this.classList.remove(t)}}}}),self.customElements.define("responsive-container",i)}"undefined"!=typeof ResizeObserver&&"undefined"!=typeof customElements||!matchMedia("(min-width: "+r.SM+"px)").matches?a():(e="/scripts/polyfills.js",t=a,(s=document.createElement("script")).src=e,s.onload=t,document.head.appendChild(s))}();</script>
    
    


    
     

  </body>

</html>